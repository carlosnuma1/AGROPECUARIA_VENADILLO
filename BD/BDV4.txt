DROP TABLE IF EXISTS CARGOS CASCADE;
CREATE TABLE IF NOT EXISTS CARGOS(
ID_CARGO SERIAL,
NOMBRE_CARGO VARCHAR(50),
CONSTRAINT PK_CARGO PRIMARY KEY (ID_CARGO),
CONSTRAINT NN_NOMBRE_CARGO CHECK (NOMBRE_CARGO IS NOT NULL),
CONSTRAINT UC_NOMBRE_CARGO UNIQUE (NOMBRE_CARGO)
);

DROP TABLE IF EXISTS USUARIOS CASCADE;
CREATE TABLE IF NOT EXISTS USUARIOS(
ID_USUARIO SERIAL,
ID_CARGO SERIAL,
DOCUMENTO_USU VARCHAR (15),
NOMBRE1_USU VARCHAR (20),
NOMBRE2_USU VARCHAR (20),
APELLIDO1_USU VARCHAR (20),
APELLIDO2_USU VARCHAR (20),
TELEFONO_USU VARCHAR (20),
CLAVE_USU VARCHAR (50),
ESTADO_USU CHAR (2),
CONSTRAINT PK_USUARIO PRIMARY KEY (ID_USUARIO),
CONSTRAINT UC_ID_USUARIO UNIQUE (ID_USUARIO),
CONSTRAINT NN_NOMBRE1_USU CHECK (NOMBRE1_USU IS NOT NULL),
CONSTRAINT NN_APELLIDO1_USU CHECK (APELLIDO1_USU IS NOT NULL),
CONSTRAINT NN_DOCUMENTO_USU CHECK (DOCUMENTO_USU IS NOT NULL),
CONSTRAINT NN_ID_CARGO_USU CHECK (ID_CARGO IS NOT NULL),
CONSTRAINT NN_TELEFONO_USU CHECK (TELEFONO_USU IS NOT NULL),
CONSTRAINT NN_CLAVE_USU CHECK (CLAVE_USU IS NOT NULL),
CONSTRAINT NN_ESTADO_USU CHECK (ESTADO_USU IS NOT NULL),
CONSTRAINT FK_ID_CARGO FOREIGN KEY (ID_CARGO)
REFERENCES CARGOS (ID_CARGO)
);

DROP TABLE IF EXISTS ACCESO CASCADE;
CREATE TABLE IF NOT EXISTS ACCESO(
ID_ACCESO SERIAL,
ID_USUARIO SERIAL,
CONSTRAINT PK_ACCESO PRIMARY KEY (ID_ACCESO),
CONSTRAINT UC_ID_USUARIO UNIQUE (ID_USUARIO),
CONSTRAINT NN_ID_USUARIO CHECK (ID_USUARIO IS NOT NULL),
CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO)
REFERENCES USUARIOS (ID_USUARIO)
);



DROP TABLE IF EXISTS PROVEEDORES CASCADE;
CREATE TABLE IF NOT EXISTS PROVEEDORES(
ID_PROVEEDOR SERIAL,
NOMBRE_PROV VARCHAR (50),
DIRECCION_PROV VARCHAR (50),
TELEFONO_PROV VARCHAR (15),
CONSTRAINT PK_PROVEEDOR PRIMARY KEY (ID_PROVEEDOR),
CONSTRAINT UC_ID_PROVEEDOR UNIQUE (ID_PROVEEDOR),
CONSTRAINT NN_ID_PROVEEDOR CHECK (ID_PROVEEDOR IS NOT NULL),
CONSTRAINT NN_NOMBRE_PROV CHECK (NOMBRE_PROV IS NOT NULL),
CONSTRAINT NN_DIRECCION_PROV CHECK (DIRECCION_PROV IS NOT NULL),
CONSTRAINT NN_TELEFONO_PROV CHECK (TELEFONO_PROV IS NOT NULL)
);


DROP TABLE IF EXISTS PRODUCTOS CASCADE;
CREATE TABLE IF NOT EXISTS PRODUCTOS(
ID_PRODUCTO SERIAL,
CODIGO_PROD VARCHAR (6),
NOMBRE_PROD VARCHAR (50),
PRECIO_PROD float,
CANTIDAD_PROD INTEGER,
DESCRIPCION_PROD VARCHAR (100),
CONSTRAINT PK_PRODUCTO PRIMARY KEY (ID_PRODUCTO),
CONSTRAINT UC_ID_PRODUCTO UNIQUE (ID_PRODUCTO),
CONSTRAINT NN_ID_PRODUCTO CHECK (ID_PRODUCTO IS NOT NULL),
CONSTRAINT NN_CODIGO_PROD CHECK (CODIGO_PROD IS NOT NULL),
CONSTRAINT NN_NOMBRE_PROD CHECK (NOMBRE_PROD IS NOT NULL),
CONSTRAINT NN_PRECIO_PROD CHECK (PRECIO_PROD IS NOT NULL),
CONSTRAINT NN_CANTIDAD_PROD CHECK (CANTIDAD_PROD IS NOT NULL),
CONSTRAINT NN_DESCRIPCION_PROD CHECK (DESCRIPCION_PROD IS NOT NULL)
);


DROP TABLE IF EXISTS ORDEN_COMPRA CASCADE;
CREATE TABLE IF NOT EXISTS ORDEN_COMPRA(
ID_ORDEN_COMPRA SERIAL,
ID_PROVEEDOR SERIAL,
ID_USUARIO SERIAL,
NOMBRE_PROV VARCHAR (50),
CANTIDAD_PROV INTEGER,
FECHA DATE,
CONSTRAINT PK_ORDEN_COMPRA PRIMARY KEY (ID_ORDEN_COMPRA),
CONSTRAINT UC_ID_ORDEN_COMPRA UNIQUE (ID_ORDEN_COMPRA),
CONSTRAINT NN_ID_ORDEN_COMPRA CHECK (ID_ORDEN_COMPRA IS NOT NULL),
CONSTRAINT NN_NOMBRE_PROV CHECK (NOMBRE_PROV IS NOT NULL),
CONSTRAINT NN_CANTIDAD_PROV CHECK (CANTIDAD_PROV IS NOT NULL),
CONSTRAINT NN_FECHA CHECK (FECHA IS NOT NULL),
CONSTRAINT FK_ID_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR)
REFERENCES PROVEEDORES (ID_PROVEEDOR),
CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO)
REFERENCES USUARIOS (ID_USUARIO)
);



DROP TABLE IF EXISTS REGISTRAR_PRODUCTOS CASCADE;
CREATE TABLE IF NOT EXISTS REGISTRAR_PRODUCTOS(
ID_REGI_PROD SERIAL,
ID_PROVEEDOR SERIAL,
ID_USUARIO SERIAL,
ID_PRODUCTO SERIAL,
NOMBRE_PROV VARCHAR (50),
CANTIDAD_PROV INTEGER,
FECHA DATE,
CONSTRAINT PK_REGI_PROD PRIMARY KEY (ID_REGI_PROD),
CONSTRAINT UC_ID_REGI_PROD UNIQUE (ID_REGI_PROD),
CONSTRAINT NN_ID_REGI_PROD CHECK (ID_REGI_PROD IS NOT NULL),
CONSTRAINT NN_NOMBRE_PROV CHECK (NOMBRE_PROV IS NOT NULL),
CONSTRAINT NN_CANTIDAD_PROV CHECK (CANTIDAD_PROV IS NOT NULL),
CONSTRAINT NN_FECHA CHECK (FECHA IS NOT NULL),
CONSTRAINT FK_ID_PROVEEDOR FOREIGN KEY (ID_PROVEEDOR)
REFERENCES PROVEEDORES (ID_PROVEEDOR),
CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO)
REFERENCES USUARIOS (ID_USUARIO),
CONSTRAINT FK_ID_PRODUCTO FOREIGN KEY (ID_PRODUCTO)
REFERENCES PRODUCTOS (ID_PRODUCTO)
);


DROP TABLE IF EXISTS CLIENTES CASCADE;
CREATE TABLE IF NOT EXISTS CLIENTES(
DOCUMENTO_CLI VARCHAR (15),
NOMBRE1_CLI VARCHAR (20),
NOMBRE2_CLI VARCHAR (20),
APELLIDO1_CLI VARCHAR (20),
APELLIDO2_CLI VARCHAR (20),
TELEFONO_CLI VARCHAR (15),
DIRECCION_CLI VARCHAR (50),
CONSTRAINT PK_DOCUMENTO_CLI PRIMARY KEY (DOCUMENTO_CLI),
CONSTRAINT UC_DOCUMENTO_CLI UNIQUE (DOCUMENTO_CLI),
CONSTRAINT NN_NOMBRE1_CLI CHECK (NOMBRE1_CLI IS NOT NULL),
CONSTRAINT NN_APELLIDO1_CLI CHECK (APELLIDO1_CLI IS NOT NULL),
CONSTRAINT NN_DOCUMENTO_CLI CHECK (DOCUMENTO_CLI IS NOT NULL),
CONSTRAINT NN_TELEFONO_CLI CHECK (TELEFONO_CLI IS NOT NULL),
CONSTRAINT NN_DIRECCION_CLI CHECK (DIRECCION_CLI IS NOT NULL)
);





DROP TABLE IF EXISTS FACTURA CASCADE;
CREATE TABLE IF NOT EXISTS FACTURA(
ID_FACTURA SERIAL,
DOCUMENTO_CLI VARCHAR (15),
ID_USUARIO SERIAL,
ID_PRODUCTO SERIAL,
TOTAL FLOAT,
FECHA_FAC DATE,
CONSTRAINT PK_FACTURA PRIMARY KEY (ID_FACTURA),
CONSTRAINT UC_ID_FACTURA UNIQUE (ID_FACTURA),
CONSTRAINT NN_ID_FACTURA CHECK (ID_FACTURA IS NOT NULL),
CONSTRAINT NN_DOCUMENTO_CLI CHECK (DOCUMENTO_CLI IS NOT NULL),
CONSTRAINT NN_ID_USUARIO CHECK (ID_USUARIO IS NOT NULL),
CONSTRAINT NN_ID_PRODUCTO CHECK (ID_PRODUCTO IS NOT NULL),
CONSTRAINT NN_TOTAL CHECK (TOTAL IS NOT NULL),
CONSTRAINT NN_FECHA_FAC CHECK (FECHA_FAC IS NOT NULL),
CONSTRAINT FK_DOCUMENTO_CLI FOREIGN KEY (DOCUMENTO_CLI)
REFERENCES CLIENTES (DOCUMENTO_CLI),
CONSTRAINT FK_ID_USUARIO FOREIGN KEY (ID_USUARIO)
REFERENCES USUARIOS (ID_USUARIO),
CONSTRAINT FK_ID_PRODUCTO FOREIGN KEY (ID_PRODUCTO)
REFERENCES PRODUCTOS (ID_PRODUCTO)
);